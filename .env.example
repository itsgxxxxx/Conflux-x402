# ===== Facilitator =====
FACILITATOR_PRIVATE_KEY=0x...      # Facilitator wallet private key (needs CFX for gas)
FACILITATOR_PORT=4022

# ===== Settlement (Execute on-chain transactions?) =====
VERIFY_ONLY_MODE=true                     # true = signature check only, false = real settlement

# ===== Safety Controls =====
MAX_PER_TRANSACTION=1.0             # Per-tx limit (USD)
MAX_DAILY_TOTAL=10.0                # Daily total limit (USD)
CIRCUIT_BREAKER_THRESHOLD=10        # Halt after N anomalies
GAS_BUFFER_PERCENT=50               # Gas estimate buffer % (Conflux needs ~50%)

# ===== Server =====
SERVER_PORT=4021
FACILITATOR_URL=http://localhost:4022
EVM_ADDRESS=0x...                   # payTo address (receives USDT0)
PAYMENT_ENABLED=true                # Global kill switch

# ===== Server Auth Gate (Who can access?) =====
# AUTH_MODE controls whether clients must prove identity before paying.
#
# Mode "none" (default): No authentication. Pure x402 flow.
#   AUTH_MODE=none
#
# Mode "domain_gate": Clients sign requests with their wallet key.
#   Server recovers payer address from signature and checks IdentityRegistry on-chain.
#   Unauthenticated/unregistered clients receive 403 before reaching the payment layer.
#   AUTH_MODE=domain_gate
#   IDENTITY_REGISTRY_ADDRESS=0x...
#
AUTH_MODE=none
IDENTITY_REGISTRY_ADDRESS=0x...           # Required when AUTH_MODE=domain_gate

# ===== Service-to-Service Auth =====
# Shared secret between server and facilitator.
# When set, the facilitator rejects requests without a matching X-API-Key header.
# The server automatically sends this key when calling the facilitator.
FACILITATOR_API_KEY=                      # Leave empty to disable API key protection

# ===== Client =====
CLIENT_PRIVATE_KEY=0x...            # Payer wallet private key (needs USDT0 balance)
SERVER_URL=http://localhost:4021

# Client auth (must match server AUTH_MODE)
AUTH_ENABLED=false                  # true = sign requests with wallet key (required when server AUTH_MODE=domain_gate)

# ===== Identity Gating Contracts =====
# Only needed for identity registration (not for day-to-day payment operations)
ZK_VERIFIER_ADDRESS=0x...           # ZKVerifier contract address (from deployment)

# ===== Attestor Service (Optional) =====
# Required if using identity gating registration flow
ATTESTOR_PRIVATE_KEY=0x...          # Attestor's private key for signing attestations
ATTESTOR_URL=http://localhost:3003  # Attestor service URL
PORT=3003                            # Attestor service port
DEFAULT_EXPIRY_SECONDS=2592000      # Identity expiry time (30 days)
MOCK_MODE=false                      # Skip HTTP verification (testing only)
